:ruby
  tooltip = properties[:tooltip]
  tooltip_class = !tooltip.nil? ? ' tooltip--container' : ''
  disabled_class = properties[:disabled] ? ' is-disabled' : ''

  if properties[:selected]
    selected_title = properties[:options].find{ |option| option[:value] == properties[:selected] || option[:title] == properties[:selected] }.try(:[], :title)
  end

  select_properties = {
    multiple: true,
    id: properties[:id],
    name: properties[:name],
    data: properties[:data],
    class: "input--select-multiple #{properties[:class]}#{disabled_class}#{tooltip_class}",
    disabled: properties[:disabled],
    required: properties[:required]
  }

%select.input{ select_properties }

  - properties[:options].each do |option|
    %option{value: option[:value] || option[:title], disabled: option[:disabled], data: option[:data], selected: (properties[:selected] && (properties[:selected] == option[:value] || properties[:selected] == option[:title])) ? 'selected' : false}<
      = option[:title]


= render :partial => 'components/forms/partials/tooltip', :locals => { tooltip: tooltip }
