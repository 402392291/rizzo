:ruby

  css_classes = [

    "card",
    "card--poi",
    "card--poi--hotel",
    "card--single",
    card[:bookable?] ? "card--small-image card--extended-content" : "card--no-image"

  ].join(" ")


%article.js-lodging.js-card{class: css_classes }

  %a.link--wrapper{href: card[:path]}

    - if card[:bookable?]
      %figure.card__hero
        %img.card__image.js-card__image{src: card[:list_image]["url"]}

      - price = card['total_price'] || card[:indicative_price_in_user_currency]
      .card__tags
        - if price && price > 0
          = ui_component('price_tag', properties: { currency: raw(currency.to_symbol), price: price(price, :no_pence), scope: card['total_price'] ? 'total stay' : 'per night' })
          
        = render :partial => '/components/cards/partials/lodging_badges', :locals => { :card => card }
    - else
      .card__tags
        .tag.tag--non-bookable
          %div.icon--contact
        = render :partial => '/components/cards/partials/lodging_badges', :locals => { :card => card }

    .card__content
      - if (card[:property_type].present? && card[:bookable?])
        %span.card__property-type<
          - if card[:hotel_star_ranking].present?
            = card[:hotel_star_ranking]
          - else
            = card[:property_type_title]

      %h2.card__name.js-lodging-name{class: card[:neighbourhood] ? '' : 'has-no-locale'}<
        = truncate((card[:name].titleize), :length=> 50, :separator => ' ')

      - if card[:nearby_place_text]
        %p.card__locale.icon--place--pin--before
          = card[:nearby_place_text]

      - if card[:card_description]
        %p.card__description
          = card[:card_description]

    %footer.card__footer
      %span.btn.btn--yellow.btn--full-width
        = card[:bookable?] ? 'Book Now' : 'Read more'
