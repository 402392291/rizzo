:ruby
  colours = File.read(File.expand_path('../../../assets/stylesheets/_variables/_core_colours.sass', __FILE__)) + File.read(File.expand_path('../../../assets/stylesheets/_variables/_colours.sass', __FILE__))
  colours = colours.split("// -----------------------------------------------------------------------------\n")
  colours.delete_if(&:empty?)
  groups = []
  counter = -1
  colours.each do |section|
    if section[0..1] == "//"
      groups.push({title: section})
      counter = counter + 1
    else
      groups[counter][:body] = section
    end
  end

- groups.each do |group|
  .styleguide-block
    %h2.copy--subtitle #{group[:title][2..-1]}
    - group[:body].split(/\n/).each do |line|
      - unless line == ""
        - key_value = line.gsub(" !default", "").gsub(" ", "").split(':')
        .card.card--double.box
          .styleguide-block__item.styleguide-block__item--colour.copy--subtitle{style: "background-color: #{key_value[1]}", class: key_value[1] == "#fff" ? "is-white" : ""}<
            = key_value[1]
          %h3.copy--feature.box<
            = key_value[0]

= render 'styleguide/partials/shared'