$card-width: 220px
$card-margin: 10px
$card-height: 270px

@mixin card-dimensions($span, $width: $card-width, $height: $card-height, $margin: $card-margin)
  $width: ($width * $span) + ($margin * ($span - 1))
  $ratio: (1 / $width) * $height

  width: $width + 0px
  padding-top: percentage($ratio)

.card
  @extend %rounded-corners
  margin: 0 0 $card-margin
  position: relative
  background: #FFF

  .enhanced &
    @extend %standard-shadow

.card__mask
  @extend %rounded-corners
  position: absolute
  top: 0
  left: 0
  right: 0
  bottom: 0
  overflow: hidden

.card__figure
  position: absolute
  top: 0
  left: 0
  width: 100%
  height: 100%

.card__figure__img
  position: absolute
  height: 100%

.card__content
  position: absolute
  top: 0
  left: 0
  right: 0
  bottom: 0
  padding: 10px 15px 30px
  color: $body-copy

.card__meta
  position: absolute
  left: 0
  right: 0
  bottom: 0
  height: 30px
  padding: 0 15px
  color: $feature-copy

.card__title
  +font-size(18)
  margin-bottom: 10px

.card__desc
  +font-size(15px)
  line-height: 1.3
  color: $feature-copy

.card__tags

// -----------------------------------------------------------------------------
// Width variations
// -----------------------------------------------------------------------------

.card--single
  +card-dimensions(1)

.card--double
  +card-dimensions(2)

// -----------------------------------------------------------------------------
// Height variations
// -----------------------------------------------------------------------------

.card--tall

  &.card--has-img

    .card__content
      top: auto

    .card__desc
      display: none

    // Standard card
    &.card--standard

      .card__meta,
      .card__content
        background: #FFF

      .card__content
        height: 40px
        transition: height .2s ease-out

      &.card--has-meta
        .card__content
          bottom: 30px

      &:hover

        .card__content
          height: 65px

    // Cover image card
    &.card--cover

      .card__meta,
      .card__content
        color: #FFF

      .card__title
        +font-size(24)

      &.card--double

        .card__figure__img
          width: 100%
          height: auto

        .card__title
          +font-size(32)

  &.card--no-img

    .card__content
      padding-top: 15px

.card--short
  // Short cards are always a single width
  +card-dimensions($span: 1, $height: 195px)

  &.card--has-img

    // Short cards with an image should always act
    // as a cover image whether told to or not.
    .card__figure__img
      width: 100%
      height: auto

    .card__meta,
    .card__content
      color: #FFF

    .card__content
      top: auto

    .card__title
      +font-size(24)

    .card__desc
      display: none

// -----------------------------------------------------------------------------
// Shop cards
// -----------------------------------------------------------------------------

.card--shop

  &.card--has-img

    .card__figure
      bottom: 110px
      height: auto
      background: image_url("cards/guide-background.jpg")
      background-size: cover

    .card__figure__img
      top: 0
      left: 0
      right: 0
      bottom: 0
      height: 80%
      margin: auto

  // Price tag adjustments
  .tag--price__values
    padding-top: 10px
